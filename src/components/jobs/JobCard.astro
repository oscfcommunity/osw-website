---
interface Props {
  job: any;
}

const { job } = Astro.props;

// Determine the application URL or email
const applicationHref = job.data.application.url
  ? job.data.application.url
  : job.data.application.applyEmail
    ? `mailto:${job.data.application.applyEmail}`
    : '#';

const isExternal = job.data.application.url ? true : false;
---

<div
  class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-lg hover:border-primary/30 transition-all duration-200"
>
  <div class="card-body p-5">
    <h2 class="card-title text-xl font-bold mb-2 text-base-content">
      {job.data.title}
    </h2>

    <p class="text-base-content/80 mb-4">
      {job.data.company.name}
    </p>

    <div class="card-actions justify-end">
      <a
        href={applicationHref}
        class="btn btn-primary btn-sm"
        target={isExternal ? '_blank' : undefined}
        rel={isExternal ? 'noopener noreferrer' : undefined}
        aria-label={`Apply for ${job.data.title} at ${job.data.company.name}`}
      >
        Apply Now
        {
          isExternal && (
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
              />
            </svg>
          )
        }
      </a>
    </div>
  </div>
</div>
